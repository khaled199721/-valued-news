
export async function getTopNews(category?: string) {
  const baseUrl = "https://gnews.io/api/v4/top-headlines";

  const url = category
    ? `${baseUrl}?category=${category}&lang=en&country=us&max=10&apikey=${API_KEY}`
    : `${baseUrl}?lang=en&country=us&max=10&apikey=${API_KEY}`;

  try {
    const res = await fetch(url, {
      next: { revalidate: 1800 },
    });

    if (!res.ok) {
      console.error("GNews API Error:", res.status);
      return [];
    }

    const data = await res.json();
    return data.articles || [];
  } catch (error) {
    console.error("Fetch error:", error);
    return [];
  }
}
